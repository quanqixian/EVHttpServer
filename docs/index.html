<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EVHttpServer: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Logo01.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EVHttpServer
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">A Lightweight http server base libevent and threadpool</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">EVHttpServer Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="./Logo01.jpg" alt="EVHttpServer logo"/>
</div>
<h1><a class="anchor" id="autotoc_md0"></a>
1.Introduction</h1>
<p><a class="el" href="classEVHttpServer.html" title="EVHttpServer is just an http server implemented by encapsulating libevent using c++, It provides: ">EVHttpServer</a> is just an http server implemented by encapsulating libevent using c++, It provides:</p>
<ul>
<li>Simpler api</li>
<li>Use thread pool to handle http requests</li>
<li>Support regular matching path</li>
</ul>
<h1><a class="anchor" id="autotoc_md1"></a>
2.Tutorial</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
2.1 main classes to focus on:</h2>
<p>Using <a class="el" href="classEVHttpServer.html" title="EVHttpServer is just an http server implemented by encapsulating libevent using c++, It provides: ">EVHttpServer</a>, there are three main classes to focus on:</p>
<ul>
<li><code><a class="el" href="classEVHttpServer.html" title="EVHttpServer is just an http server implemented by encapsulating libevent using c++, It provides: ">EVHttpServer</a></code> : encapsulates HTTP service initialization, start, stop, and registration callbacks.</li>
<li><code><a class="el" href="classEVHttpServer_1_1HttpReq.html" title="HttpReq is an encapsulation class for http requests, which provides access to method, path, body, etc. It is not allowed to be created externally. Some components of the uri do not provide access functions. ">EVHttpServer::HttpReq</a></code> : encapsulates HTTP requests, and provides methods for obtaining headers, query, and body.</li>
<li><code><a class="el" href="classEVHttpServer_1_1HttpRes.html" title="HttpRes is the encapsulation class of http response, which provides methods for setting body...">EVHttpServer::HttpRes</a></code> : encapsulates the http reply, and provides methods for setting headers and body.</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
2.2 demo</h2>
<div class="fragment"><div class="line">{c++}</div><div class="line">#include &quot;EVHttpServer.h&quot;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;thread&gt;</div><div class="line">#include &lt;signal.h&gt;</div><div class="line"></div><div class="line">static volatile bool g_runFlag = true;</div><div class="line"></div><div class="line">void sighandler(int signum)</div><div class="line">{</div><div class="line">    g_runFlag = false;</div><div class="line">}</div><div class="line"></div><div class="line">int main(int argc, const char *argv[])</div><div class="line">{</div><div class="line">    /* Create an http server */</div><div class="line">    EVHttpServer server;</div><div class="line"></div><div class="line">    /*  Initialize http server port */</div><div class="line">    server.init(9999);</div><div class="line"></div><div class="line">     /* start http server */</div><div class="line">    server.start();</div><div class="line"></div><div class="line">    /*</div><div class="line">     *   Register the http request handler function, the combination of method and path represents a unique request.</div><div class="line">     *   In the request processing function, various parameters of the request can be obtained through the req object,</div><div class="line">     * and parameters such as the body and header of the reply can be set through the res object.</div><div class="line">     */</div><div class="line">    server.addHandler({EVHttpServer::REQ_POST, &quot;/api/fun&quot;}, [](const EVHttpServer::HttpReq &amp; req, EVHttpServer::HttpRes &amp; res, void * arg)-&gt;void {</div><div class="line"></div><div class="line">            std::cout &lt;&lt; req.methodStr() &lt;&lt; &quot; &quot; &lt;&lt; req.path() &lt;&lt; std::endl;</div><div class="line">            std::cout &lt;&lt; req.body() &lt;&lt; std::endl;</div><div class="line"></div><div class="line">            res.setBody(R&quot;({&quot;status&quot;:&quot;OK&quot;})&quot;);</div><div class="line">            });</div><div class="line"></div><div class="line">    signal(SIGINT, sighandler);</div><div class="line"></div><div class="line">    while(g_runFlag)</div><div class="line">    {</div><div class="line">        std::this_thread::sleep_for(std::chrono::seconds(2));</div><div class="line">    }</div><div class="line"></div><div class="line">    return 0;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
